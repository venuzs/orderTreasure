<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>订货宝 让生意更美好！</title>
	<script src="js/vue221.js"></script>
	<!-- 引入样式 -->
	<link rel="stylesheet" href="css/element.css">
	<link rel="stylesheet" href="css/global.css" />
	<link rel="stylesheet" href="css/main.css" />
	<link rel="stylesheet" href="css/myelement.css" />
	<!-- 引入组件库 -->
	<script src="js/element.js"></script>
	
<style type="text/css">
.cf:after { visibility: hidden; display: block; font-size: 0; content: " "; clear: both; height: 0; }
* html .cf { zoom: 1; }
*:first-child+html .cf { zoom: 1; }
.dd { position: relative; display: block; margin: 0; padding: 0; width: 100%; list-style: none; font-size: 14px; line-height: 20px; }
.dd-list { display: block; position: relative; margin: 0; padding: 0; list-style: none; }
.dd-list .dd-list { padding-left: 30px; }
.dd-collapsed .dd-list { display: none; }
.dd-item,
.dd-empty,
.dd-placeholder { display: block; position: relative; margin: 0; padding: 0; min-height: 20px; font-size: 14px; line-height: 48px; }
.dd-handle { display: block; height: 50px; line-height: 48px; margin-bottom: 10px; padding: 0 20px; color: #222; text-decoration: none; font-weight:normal; border: 1px solid #ddd;
    background: #fff;
    -webkit-border-radius: 4px;
   border-radius: 4px;
    box-sizing: border-box; -moz-box-sizing: border-box;
}
.dd-handle:hover,.dd-handle.active { background: #E1E8F5; }
.dd-handle::before {content: '';position: absolute;width: 8px;height: 8px;top: 20px;left: -21px;border-radius: 4px;font-size: 14px;
    text-align: center;
    line-height: 10px;
    background-color: #fff;
    padding: 0;
    color: #666;
    border: 1px solid #D7DADB;
    z-index: 90;
}
.dd_option {display: none;}
.dd-handle:hover > .dd_option {display: block;}
.dd_option > button {color: #3366CC;border: none;background-color: transparent;outline: transparent;cursor: pointer;}
.dd_option span {color: #3366CC;}
.drag_tree {padding-left: 20px;border: 0; border-top: 1px solid #eee;border-bottom: 1px solid #eee;margin-top: 22px;}
.dd-item > .dragbtn { position: absolute; color: #666; left:-24px; top: 18px; width: 14px; height: 14px; text-indent: 100%; white-space: nowrap; overflow: hidden; border: 1px solid #D7DADB; background: #FFF; line-height: 10px; text-align: center; font-weight: normal; z-index: 99;}
.dd-item > .dragbtn:before { display: block; content: '+'; position: absolute; width: 100%; font-size: 14px; text-align: center; text-indent: 0; }
.dd-item > .dragbtn[data-action="collapse"]:before { content: '-'; font-size: 14px; }
.dd-placeholder,
.dd-empty { margin-bottom: 10px; padding: 0; min-height: 30px; background: #FCFAFC; border: 1px dashed #DDDDDD; box-sizing: border-box; -moz-box-sizing: border-box; }
.dd-dragel { position: absolute; pointer-events: none; z-index: 9999; }
.dd-dragel > .dd-item .dd-handle { margin-top: 0; }
.dd-dragel .dd-handle {-webkit-box-shadow: 2px 4px 6px 0 rgba(0,0,0,.1);box-shadow: 2px 4px 6px 0 rgba(0,0,0,.1);}
.nestable-lists { display: block; clear: both; padding: 20px 0; width: 100%;}
.dd-item.on::before {content: '';position: absolute;top: 45px;bottom: -15px;left: -17px;width: 1px;border-left: 1px solid #ddd;}
.dd-list .dd-item.on:last-of-type::before {display: none;} 
</style>
</head>
<body>
	<div id="app">
		<div class="main-content">
			<div class="z-tabs">
		 		<div class="z-tabs_header">
		 			<div class="z-tabs_item "><span class="item_span">员工资料</span></div>
		 			<div class="z-tabs_item">
		 				<span class="item_span">角色权限</span>
		 				<div class="z-pop_question">
			  	 			<el-popover
								  ref="popoverq"
								  placement="bottom-start"
								  width="400"
								  trigger="hover">
								  <p class="z-jiao">角色权限：每个角色可以设置不同的后台功能权限，比如：
										业务员角色，仓库管理员角色，财务角色。然后账号关联
										某个角色，就拥有该角色下的所有功能权限。
										<a href="javascript:;">查看更多帮助</a>
								  </p>
								</el-popover>
								
								<i v-popover:popoverq class="el-icon-question"></i>
			  	 		</div>
		 			</div>
		 			<div class="z-tabs_item">
		 				<span class="item_span">部门管理</span>
		 				<div class="z-pop_question">
			  	 			<el-popover
								  ref="popoverb"
								  placement="bottom-start"
								  width="400"
								  trigger="hover">
								  <p class="z-jiao">设置公司部门划分，比如：销售1部 销售2部 仓管部 </br>1、可以拖动某条内容上下移动修改顺序；</br> 2、修改请勿忘保存</p>
								</el-popover>
								
								<i v-popover:popoverb class="el-icon-question"></i>
			  	 		</div>
		 			</div>
		 			<div class="z-tabs_item is_active"><span class="item_span">登录日志</span></div>
		 		</div>
		 		
		 		<div class="z-tabs_content">
		 			<div class="content_item"> <!--员工管理-->
	 				<!--条件筛选-->
	 					<div class="content_item_filter clearfix">
		  	 				<div class="input-select fl btn-radid_none">
		  	 					<el-input placeholder="请输入内容" v-model="input4" class="minW40 z_input-holder" >
								   <el-button slot="append" icon="el-icon-search"></el-button>
								  </el-input>
								  
								  <el-select v-model="valueId" clearable placeholder="身份" class="z_select-holder">
								    <el-option
								      v-for="(item,index) in optionsId"
								      :key="index"
								      :label="item"
								      :value="item">
								    </el-option>
								  </el-select>
								  
								  <el-select v-model="valueState" clearable placeholder="状态" @change="change" class="z_select-holder">
								    <el-option
								      v-for="(item,index) in optionsState"
								      :key="index"
								      :label="item"
								      :value="item">
								    </el-option>
								  </el-select>
		  	 				</div>
		  	 				<div class="filter-btn fr">
		  	 					<el-button type="primary">新增员工账号</el-button>
		  	 				</div>
		 				</div>
		 				
		 				<!--主体表格-->
		 				<div class="z-tables">
			 				<el-table :data="tableData3" style="width: 100%;">
			 					<el-table-column fixed  prop="no" label="" min-width="60" class-name="z-opt_btn"></el-table-column>
			 					
							    <el-table-column fixed  label="登录账号" min-width="140">
							    	<template scope="scope">
								       <span>{{scope.row.login}}</span>
								       <label class="z-creater" v-if="scope.row.isCreater">创建者</label>
							      	</template>
							    </el-table-column>
							    
							    <el-table-column prop="uid" label="身份" min-width="130"></el-table-column>
							    
							    <el-table-column prop="name" label="姓名" min-width="110"></el-table-column> 
							    
							    <el-table-column prop="job" label="职位" min-width="150"> </el-table-column>
							    
							    <el-table-column prop="address" label="部门" min-width="130"> </el-table-column>
							    
							    <el-table-column prop="tel" label="手机号" min-width="140"> </el-table-column>
							    
							    <el-table-column prop="part" label="角色" min-width="120"> </el-table-column>
							    
							    <el-table-column prop="jion" label="邀请码" min-width="140"> </el-table-column>
							    
							    <el-table-column fixed="right" prop="remarks" label="备注" min-width="110" class-name="z-opt_btn"> </el-table-column>
							    
							    
							</el-table>
							  
			 			</div>
			 			
			 			<!--分页-->
			 			<div class="grid-content">
		  	 				<div class="bg-purple-light">
							    <el-pagination
							    	@size-change="handleSizeChange"
		     						 @current-change="handleCurrentChange"
		     						 :current-page="currentPage4"
							      :page-sizes="[5, 10, 20, 30]"
							      :page-size="5"
							       layout="total, sizes, prev, pager, next"
							      :total="100">
							    </el-pagination>
						  	</div>
		 				</div>
	 				</div>
	 				
	 				<div class="content_item"> <!--角色权限-->
	 					<div class="content_item_filter clearfix">
		  	 				<div class="filter-btn fr">
		  	 					<el-button type="primary">新增权限</el-button>
		  	 				</div>
		 				</div>
		 				<div class="z-tables">
		 					<el-table :data="tableData" style="width: 100%"  @current-change="handleCurrentTable">
		 						
		 						<el-table-column fixed prop="no" label="" min-width="60" class-name="z-opt_btn"></el-table-column>
		 						
		    					<el-table-column fixed label="名称" min-width="220">
		    						<template scope="scope">
								       <span>{{scope.row.name}}</span>
								       <label class="z-creater" v-if="scope.row.isCreater">创建者</label>
							      	</template>
		    					</el-table-column>
		    					
		    					<el-table-column prop="limit" label="权限" min-width="480"></el-table-column>
		    					
		    					<el-table-column prop="reget" label="更新时间" min-width="200"></el-table-column>
		    
		    					<el-table-column fixed="right" label="操作" min-width="120" class-name='z-opt_btn'>
		    						<template scope="scope">
								      	<div v-if="scope.row.options">
									        <el-button type="text" @click="handleEdit(scope.$index, scope.row)" size="small" title="编辑">编辑</el-button>
									        <span class="fz_c optionline"> | </span>
									         <el-button @click.native.prevent="handleDelete(scope.$index, scope.row)" type="text" size="small" title="删除">删除</el-button>
								         </div>
								         <div v-if="scope.row.super1">
								         	<span class="fc_999">内置</span>
								         </div>	
								      </template>
		    					</el-table-column>
							</el-table>
							
		 				</div>	
	 				</div>	
	 				
	 				<div class="content_item"> <!--部门管理-->
	 					
	 					<div class="main_cont" v-show="!showChoice">
		 					<div class="content_item_filter clearfix">
		 						<div class="department clearfix fl">
		 						 <h2>武汉分公司</h2>
		 						 <a href="javascript:;" @click="changePart">切换 > </a>
		 						</div>
			  	 				<div class="filter-btn fr">
			  	 					<el-button type="primary" @click="showDailog">新增部门</el-button>
			  	 				</div>
			 				</div>
			 				<div class="drag_tree" >
			 					
							    <div class="cf nestable-lists">
							        <div class="dd" id="nestable">
							            <ol class="dd-list">
							                <li class="dd-item" data-id="2">
							                    <div class="dd-handle">
							                    	<p class="fl">产品部</p>
							                    	<div class="dd_option fr"><button>新建子部门</button> <span>|</span> <button>编辑</button> <span>|</span> <button>删除</button></div>
							                    </div>
							                    <ol class="dd-list">
							                        <li class="dd-item" data-id="5">
							                            <div class="dd-handle">
							                            	<p class="fl">开发部</p>
							                    			<div class="dd_option fr"><button>新建子部门</button> <span>|</span> <button>编辑</button> <span>|</span> <button>删除</button></div>
							                            </div>
							                            <ol class="dd-list">
							                                <li class="dd-item" data-id="6">
							                                	<div class="dd-handle">
							                                		<p class="fl">开发一部</p>
							                    					<div class="dd_option fr"><button>新建子部门</button> <span>|</span> <button>编辑</button> <span>|</span> <button>删除</button></div>
							                                	</div>
							                                </li>
							                                <li class="dd-item" data-id="7">
							                                	<div class="dd-handle">
							                                		<p class="fl">开发一部</p>
							                    					<div class="dd_option fr"><button>新建子部门</button> <span>|</span> <button>编辑</button> <span>|</span> <button>删除</button></div>
							                                	</div>
							                                </li>
							                                <li class="dd-item" data-id="8">
							                                	<div class="dd-handle">
							                                		<p class="fl">设计制作部</p>
							                    					<div class="dd_option fr"><button>新建子部门</button> <span>|</span> <button>编辑</button> <span>|</span> <button>删除</button></div>
							                                	</div>
							                                </li>
							                            </ol>
							                        </li>
							                        <li class="dd-item" data-id="9"><div class="dd-handle">质检提升部</div></li>
							                    </ol>
							                </li>
							                <li class="dd-item" data-id="11">
							                    <div class="dd-handle">商务部</div>
							                </li>
							            </ol>
							        </div>
							    </div>
							    <input type="hidden" id="nestable-output" />
							</div>
		 					<div class="bottom-butn">
								 <el-button type="primary">保存部门设置</el-button>
								  <el-button>取消</el-button>
							</div>
						</div>
						<div class="depart_check" v-show="showChoice">
							<div class="departes">
								<a href="javascript:;">武汉分公司</a>
								<a href="javascript:;">合肥分公司</a>
								<a href="javascript:;">厦门分公司</a>
								<a href="javascript:;">南京分公司</a>
								<a href="javascript:;">郑州分公司</a>
								<a href="javascript:;">北京分公司</a>
								<a href="javascript:;">雄安分公司</a>
								<a href="javascript:;">深圳分公司</a>
								<span>新增组织 <i> + </i></span>
							</div>
							<div class="bottom-butn">
								 <el-button type="primary">确定</el-button>
								  <el-button @click="hideChoice">取消</el-button>
							</div>
						</div>
	 						
	 				</div>
	 				
	 				<div class="content_item active"> <!--登录日志-->
	 					<!--条件筛选-->
	 					<div class="content_item_filter clearfix">
		  	 				<div class="input-select fl btn-radid_none">
		  	 					<el-input placeholder="账号搜索" v-model="input4" class="minW40 z_input-holder" >
								   <el-button slot="append" icon="el-icon-search"></el-button>
								  </el-input>
								<div class="data-picker clearfix">  
								<el-date-picker
								    v-model="bValue"
								    type="date"
								    placeholder="开始日期" class="z_input-holder">
								</el-date-picker>
								<div class="center-line"></div>
								<el-date-picker
								    v-model="eValue"
								    type="date"
								    placeholder="截至日期" class="z_input-holder">
								</el-date-picker>
								</div>  
								  <el-select v-model="valueState" clearable placeholder="管理端用户" @change="change" class="z_select-holder">
								    <el-option
								      v-for="(item,index) in optionsState"
								      :key="index"
								      :label="item"
								      :value="item">
								    </el-option>
								  </el-select>
		  	 				</div>
		 				</div>
		 				
		 				<!--主体表格-->
		 				<div class="z-tables">
			 				<el-table :data="tableData4" style="width: 100%;">
			 					<el-table-column fixed  prop="no" label="" min-width="60" class-name="z-opt_btn"></el-table-column>
			 					
							    <el-table-column fixed prop="timer" label="时间" min-width="140"></el-table-column>
							    
							    <el-table-column prop="login" label="登录账号" min-width="130"></el-table-column>
							    
							    <el-table-column prop="name" label="姓名" min-width="110"></el-table-column> 
							    
							    <el-table-column prop="area" label="地区" min-width="150" class-name="z-opt_btn"> </el-table-column>
							    
							    <el-table-column prop="ip" label="IP" min-width="130" class-name="z-opt_btn"> </el-table-column>
							    
							    <el-table-column prop="devic" label="设备" min-width="140" class-name="z-opt_btn"> </el-table-column>
							    
							</el-table>
							  
			 			</div>
			 			
			 			<!--分页-->
			 			<div class="grid-content">
		  	 				<div class="bg-purple-light">
							    <el-pagination
							    	@size-change="handleSizeChange"
		     						 @current-change="handleCurrentChange"
		     						 :current-page="currentPage4"
							      :page-sizes="[5, 10, 20, 30]"
							      :page-size="5"
							       layout="total, sizes, prev, pager, next"
							      :total="100">
							    </el-pagination>
						  	</div>
		 				</div>
	 				</div>
		 		</div>	
		  	 </div>
		</div>
		
		<div class="v-modal" @click="dislogHide" v-show="dialogFormVisible" style="display: none;"></div>
        <div class="el-message-box__wrapper m_seniorscreen" :class="{show: dialogFormVisible}" v-show="dialogFormVisible" style="display: none;">
        	<div class="el-message-box">
        		<div class="el-message-box__header">
           	      <div class="el-message-box__title"><span>新增部门</span></div>
           	      <button type="button" @click="dislogHide" class="el-message-box__headerbtn"><i class="el-message-box__close el-icon-close"></i></button>
                </div>
                <div class="el-message-box__content">
            		<div class="v-form">
						<label>上级部门</label>
					    <el-select v-model="selectValue" placeholder="请选择">
					      <el-option  v-for="item in partOptions" :key="item.label" :label="item.label" :value="item.value"></el-option>
					    </el-select>
					</div>    
					<div class="v-form">   
						<label><s>*</s>部门名称</label>
					    <el-input ></el-input>
					</div> 	
            		<div class="v-form">   
						<label><s>*</s>部门编号</label>
					    <el-input ></el-input>
					</div> 
                </div>
                <div class="el-message-box__btns">
                	 <el-button @click="dislogHide" type="primary">确定</el-button>
                	 <el-button @click="dislogHide">取消</el-button>
                </div>
        	</div>
        </div>
	</div>
	
</body>
	
<script src="js/jquery.min.js"></script>
<script src="js/jquery.nestable.js"></script>
<script>
	
	//输入框 placeholder
  	var zPlaceholder = {
  		selects: function (ele) {
  			var selects = document.querySelectorAll(ele); 
		  	for(var i = 0, len = selects.length; i < len; i++ ) {
		  		if(selects[i].__vue__.placeholder) {
		  			selects[i].children[0].children[0].placeholder = selects[i].__vue__.placeholder;
		  		}else {
		  			selects[i].children[0].children[0].placeholder = selects[i].children[0].attributes.placeholder.value;
		  		}

		  	}
  		},
  		inputs: function (ele) {
  			var inputs = document.querySelectorAll(ele); 
		  	for(var j = 0, leng = inputs.length; j < leng; j++ ) {
		  		inputs[j].children[0].placeholder = inputs[j].attributes.placeholder.value;
		  	}
  		}
  	}
  	

	new Vue({
		el: "#app",
		data: {
			input4: '',
		    optionsId: ['普通员工','管理人员'], //select下拉选项
		    optionsState: ['启用','激活'],
		    valueId: '',
		    valueState: '',
		    tableData3: [{
	      		no: '1',
	          	login: 'LYS',
	          	uid: '普通员工 ',
	          	name: '刘雨酥 ',
	          	job: '开发工程师',
	          	address: '基础研发部',
	          	tel: '15802949593',
	         	 zip: 200333,
	          	part:'研发人员',
	          	jion: 'YQM2453',
	          	remarks: '—',
	          	isCreater: true
	          
	        	}, {
	        	no: '2',
	          	login: 'LYS',
	          	uid: '管理人员 ',
	          	name: '刘雨酥 ',
	          	job: '开发工程师',
	          	address: '基础研发部',
	          	tel: '15802949593',
	          	zip: 200333,
	          	part:'研发人员',
	          	jion: 'YQM2453',
	          	remarks: '—',
	          	isCreater: false
	        }],
	        
	        currentPage4: 4, //当前页码数
	        
	        act: 0, //tab选项
	        
	        bValue: '', //开始、结束日期
	        eValue: '',
	        
	        tableData: [{
	      	  no: '1',
	          name: '业务员',
	          limit: '订单、商品、客户、资金、报表',
	          reget: '2017-12-12 12:00:00',
	          options: true,
	          super1: false,
	          isCreater: true
	        }, {
	        	no: '2',
	          name: '仓库管理员',
	          limit: '客户、资金、报表',
	          reget: '2017-12-12 12:00:00',
	          options: true,
	          super1: false,
	          isCreater: false
	        }, {
	        	no: '3',
	          name: '超级管理员',
	          limit: '客户',
	          reget: '2017-12-12 12:00:00',
	          options: false,
	          super1: true,
	          isCreater: false
	        }], 
	        tableData4: [{
	        	no: 1,
	        	timer: '2018-04-04 09:27',
	        	login: '13437104934',
	        	name: '黄箫蔓',
	        	area: '湖北省武汉市 电信',
	        	ip: '119.96.2.200',
	        	devic: 'Mac OS X'
	        },{
	        	no: 2,
	        	timer: '2018-04-04 09:27',
	        	login: '13437104934',
	        	name: '黄箫蔓',
	        	area: '湖北省武汉市 电信',
	        	ip: '119.96.2.200',
	        	devic: 'Mac OS X'
	        },{
	        	no: 3,
	        	timer: '2018-04-04 09:27',
	        	login: '13437104934',
	        	name: '黄箫蔓',
	        	area: '湖北省武汉市 电信',
	        	ip: '119.96.2.200',
	        	devic: 'Mac OS X'
	        },{
	        	no: 4,
	        	timer: '2018-04-04 09:27',
	        	login: '13437104934',
	        	name: '黄箫蔓',
	        	area: '湖北省武汉市 电信',
	        	ip: '119.96.2.200',
	        	devic: 'Mac OS X'
	        },{
	        	no: 5,
	        	timer: '2018-04-04 09:27',
	        	login: '13437104934',
	        	name: '黄箫蔓',
	        	area: '湖北省武汉市 电信',
	        	ip: '119.96.2.200',
	        	devic: 'Mac OS X'
	        }],
	        partOptions: [{
	        	value: '选项1',
          		label: '产品部'
	        },{
	        	value: '选项2',
          		label: '研发部'
	        }],
	        dialogFormVisible: false,
	        selectValue: '',
	        showChoice: false,
		},
		methods: {
			change: function (ele) {
		  		console.log(this.valueState);
		  	},
		  	
		  	handleSizeChange: function (val) {
	        	console.log("每页"+val+"条");
		    },
		    
		    handleCurrentChange: function (val) {
		        console.log("当前页: "+ val);
		    },
		    handleCurrentTable: function (val) {
		    	//window.location.href = 'edit.html?no='+val.no;
		    },
		    //编辑、删除
		    handleEdit: function (index, row) {
		        console.log(index, row);
		    },
	     	handleDelete: function (index, row) {
	       	 	console.log(index, row);
	      },
	      dislogHide: function () {
	      	this.dialogFormVisible = false;
	      },
	      showDailog: function () {
	      	this.dialogFormVisible = true;
	      },
	      changePart: function () { //部门切换
	      	this.showChoice = true;
	      },
	      hideChoice: function () {
	      	this.showChoice = false;
	      }
		},
		mounted: function () {
			var _this = this;
		  	$('.z-tabs_item').click(function () {
		  		$(this).addClass('is_active').siblings().removeClass('is_active');
		  		var inx = $(this).index();
		  		
		  		$('.content_item').eq(inx).addClass('active').siblings().removeClass('active');
		  		
		  		if($('.content_item.active .right_pos table').length > 0) {
	  			var tableH = $('.right_pos').height();
	  			$('.right_table').height(tableH);
	  		}
		  	});
		  	
		  	//placeholder
		  	zPlaceholder.selects('.z_select-holder');
		  	zPlaceholder.inputs('.z_input-holder');
		  	
		  	//	拖拽

		 	var updateOutput = function(e){
		        var list   = e.length ? e : $(e.target),
		            output = list.data('output');
		        if (window.JSON) {
		            output.val(window.JSON.stringify(list.nestable('serialize')));//, null, 2));
		        } else {
		            output.val('JSON browser support required for this demo.');
		        }
		        $('.dragbtn').parent('li').addClass("on");
		       	$('.dd-item.on').each(function (i,v) {
		       		if($(v).children('a').hasClass('dragbtn')) {
		       		}else {
		       			$(v).removeClass('on');
		       		}
		       	});
		       	//拖拽返回值
		       	console.log($('#nestable-output').val());
		    };
		
		    $('#nestable').nestable({
		        group: 1
		    }).on('change', updateOutput);
		    
		    updateOutput($('#nestable').data('output', $('#nestable-output')));
	
		},
		updated: function () {
			
		},
	});
</script>
</html>